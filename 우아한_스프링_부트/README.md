# 우아한 스프링 부트 - 백기선

### 부트를 공부하기 전 배우면 좋은 것들

- 자바 & 자바 엔터프라이즈 에디션
- 스프링 부트가 아닌 스프링 자체

### 스프링 부트가 다루는 영역

스프링을 쉽게 쓰기 위해 제공해 주는 툴

스프링 부트를 알기 위해선 먼저 스프링을 잘 알아야 한다

- 빌드
  - 프로젝트 생성
  - 의존성 관리
  - 애플리케이션 패키징 및 실행
- 코딩

  - 개발 툴 제공
  - 자동 설정
  - 외부 설정

- 배포 및 관리
  - 도커 이미지 생성
  - Actuator
  - 스프링 부트 어드민

### 프로젝트 생성

start.spring.io 에서 프로젝트를 쉽게 만들 수 있다

- 버전

  - 스냅샷은 개발중인 버전
  - M2버전은 바뀔 수 있음 (미리 공부하는 입장에서만 권장)
  - 버전은 아무것도 안써잇는 버전 (GA)

- 메타
  - 메타는 프로젝트의 중요한 정보들
  <!-- - Artifact 설명 추가-->
  - packaging은 jar와 war로 나뉨 (자바 공부하게 되면 잘 알게 됨)

### 의존성 관리

프로젝트에 필요한 의존성을 쉽게 관리해준다

- pom.xml은 버전을 명시하지 않아도됨 (스프링부트에서 관리하는 라이브러리만)
  - 부모에서 버전이 명시되어 있음 (dependancy management)
  - 스프링부트가 현재 버전에서 가장 최적화된 버전을 정의하고 있음
  - 기존에는 적합한 버전을 찾는 것 자체가 cost가 많이 들었음

### 빌드: 애플리케이션 실행

- mvn spring-boot:run

  - 스프링 부트 메이븐 플러그인 사용
  - 메이븐을 사용해서 실행

- main 클래스 실행

  - 가장 평험한 방법
  - ide 사용해서 실행

- JAR 패키징 & java -jar
  - 스프링 부트 플러그인을 사용해 특수한 실행 가능한 형태의 JAR 파일을 만들 수 있음.
  - 주로 서버를 배포할때 사용

### 코딩: 개발 툴

spring-boot-devtools

- 개발 중 뷰 리소스 또는 템플릿에 적용되는 캐시는 오히려 불편
- 개발 중에 애플리케이션을 자주 재시작
- 개발 중에 웹 브라우저를 자주 리로링 한다.

Devtools는 classpath에 변경이 생기면 이를 감지해 재시작 여부를 판단

- 빌드만 해도 코드만 바꼇다는걸 감지하여 최소한의 부분만 application context를 다시 만듦

- 빌드는 개발내용을 컴파일 하는 과정, 애플리케이션 재기동은 서버가 재시작되는 차이

배포할때는 devtools 의존성을 제거해야 할까?

- 패키징을 한 상태에서 실행할 때는 devtools가 해주는 설정이 무시가 됨

### 코딩: 자동 설정

`어플리케이션에서 설정 -> 자동 설정 순으로 우선순위`

애플리케이션에서 설정한 빈 등록

- @ComponentScan
- @Component, @Service, @Controller, @Repository
- @Configuration
- @Bean

자동 설정

- META-INF/spring.factories
- EnableAutoConfiguration
- @Configuration && @ConditionalOnXxx

다른 프로젝트에서 설정한것을 다른 프로젝트에서도 적용할 수 있다.

- 조건이 있을경우 조건을 충족해야만

### 코딩: 외부 설정 파일

코드에서 값을 밖으로 꺼내는 방법 제공

- application.properties 또는 application.yaml, 환경 변수, java 명령어 아규먼트 등 키/값의 형태로 정의되어 있는 다양한 외부 설정 지원

- application.properties
  - 가장 구체적이고 가까운 위치에 있는 설저의 우선 순위가 높다.
  - 이를 활용해 애플리케이션을 배포할때 값을 변경이 가능하다!

### 배포: 도커 이미지 빌드

계층형 이미지 빌드 지원

- 도커 이미지는 다른 이미지를 기반으로 새로운 이미지를 만들 수 있다.
<!-- - -->

`dive 이미지 이름` 하면 이미지가 어떻게 쌓였는지 확인 가능

### 관리: Actuator

애플리케이션 관련 데이터 및 모니터링 정보 제공

### 관리: 스프링 부트 어드민

Actuator 기반 UI

- 어드민 서버를 만들어야 함
- Actuator에 있는 정보가 시각화 되어있고 더 간편하게 할 수 있다.

<!-- ## 후기 -->
