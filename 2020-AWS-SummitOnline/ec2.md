# 회사 계정/패스워드 그대로 AWS 관리 콘솔 및 EC2 인스턴스 사용하기

## AWS IaM101

### AWS IAM 사용자

최대 5000 IAM 사용자
만료되지 않는 자격증명

### 서비스 용도를 위한 AWS IAM 역할(role)

다음과 같은 경우에 AWS 자원에 접근하기 위해 AWS IAM 역할 사용

EC2 인스턴스 또는 람다와 같은 AWS 환경에서 실행되는 어플리케이션이 AWS WKDNJSDㅔ 접근할 경우

AWS 서비스가 개별 AWS 계정 자원에 접근할 경우

### 타 계정 접근을 위한 AWS IAM 역할 사용

AWS IAM 전용 계정에만 AWS IAM 사용자 생성하여 다른 계정의 역할 연결

IAM rmfnqdmf 사용하여 그룹을 관리

개별 계정에 AWS IAM 사용자를 중복 생성하는 번거로움 제거

동일 사용자가 여러 계정의 패스워드 관리하는 번거로움 제거

### 아이덴티티 관리 체크 포인트

아이덴티티 관리 대상 예제

- 기존 기업 내 IT 사용자 관리
- AWS IAM 사용자 관리
- AWS 리소스 내 사용자 관리

## Amazon EC2 인스턴스 계정 통합

### 우리가 인지 못햇던 AWS IAM 기반 인증의 장점

AWS IAM 인증 보안 수준 향상

AWS IAM 인가 정책 통합 수준 향상

AWS IAM 관리 편의성 향상

### 1. Amazon EC2 Instance Connect

- 편의성 - 별도의 클라이언트 없이 EC2 웹 콘솔에서 인스턴스에 SSH 접근
- 호환성 - CLI 또는 ssh 클라이언트를 이용하여 기존과 비슷한 방법으로 접근 가능
- 보안성 - 60초 동안 유효한 임시 ssh 키 사용
- 관리성 - ssh 키 관리 필요 없음, IAM 정책으로 제공
- 감사추적성 - 사용자 세션 접근 요청은 CloudTrail에 기록
- 기본 요구 사항 - 기존과 동일한 SSH 포트의 네트워크 연결 허용, Linux만 지원

### 2. AWS Systems Manager Capabilities - Session Manager

- 인스턴스에 더 높은 네트워크 접근 통제 적용 가능
- 인스턴스 내 관리자 행위의 감사추적성 확보 가능
- 다양한 배포판 리눅스/윈도우즈 환경 복합적으로 사용 가능
- AWS System Manager의 다양한 관리 기능 복합적으로 활용 가능

## AWS에서 계정 관리는 없애고, 접근 관리는 그대로

### 예전엔 모든것이 개별적으로 구현

- 누가(아이덴티티)
- 어떤 행위를(액세스)
- 어떤 대상에(리소스)

### 이제는 표준화된 것은 사용, 필요한 것만 구현

- 표준화된 모델: 누가(아이덴티티)
- 서비스별 특화된 모델: 어떤 행위를(액세스), 어떤 대상에(리소스)

### 아이덴티티 페더레이션 장점

- 하나의 ID로 여러 시스템
- 민감 정보가 한곳에/나머지는 임시 자격증명
- 내부 통제와 통합되어 일관된

### SAML 2.0

SAML 2.0을 통해 사용자와 AWS 간에 신뢰를 맺는다.

### Session Tags

#### 아이덴티티 공급자가 사용자 및 속성을 정의

사용자의 권한을 결정하기 위한 주요 정보를 사용자 속성으로 세션에 제공

#### 접근 권한의 자동 적용

새로운 사용자 또는 속성이 변경된 사용자에 새로운 접근 권한 자동 적용

#### 사용자 행위의 감사 추적 지원

AWS CloudTrail이 향후 추적을 위해 속성값을 로그에 남김

### AWS Single Sign-On (SSO)

AWS 계정과 비즈니스 어플리케이션에 대한 SSO 접근의 중앙 관리를 도와주는 서비스

### AWS Organizations

- AWS 계정을 조직 구도에 맞추어 정의
- 서비스 접근 권한 통제
- 태그 기반 정책 적용
- 어카운트 간의 리소스 공유
- 빌링 통합

## 요약

- 사용자 저장소의 개수는 최소화
- AWS에 EC2 인스턴스 기반의 리소스 접근을 AWS IAM 서비스와 통합 고려
- 회사 내에 SAML 지원 아이덴티티 저장소가 있다면 AWS SSO로 연동
- 아이덴티티 관리 통합으로 사용자의 편의성, 보안 수준, 감사 추적성을 모두 향상
