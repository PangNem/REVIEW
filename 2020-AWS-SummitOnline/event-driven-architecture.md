# event-driven-architecture

## 이벤트 드리븐 아키텍쳐

### 동기적 처리

가장 많이 사용되는 곳은 이커머스 시장
구매 버튼을 클릭하는 순간 많은 작업이 진행됨(주문, 포장 등)

주문 서비스에서 주문 처리 요청 -> 물류 통합 서비스
주문 서비스에서 오류 시 물류 통합 서비스에서도 에러
하나의 서비스의 장애는 다른 서비스의 장애도 불러옴

직접 서비스를 요청하지 않는 형식

### 이벤트란?

시스템의 비즈니스 도메인의 중요한 역할

이벤트는 '명령'이 아닌 '관찰'을 의미
상대방에게 어떤 동작을 기대하거나 관심을 가지지 않는다

- 발생한 사건을 표현하는 메시지 형식
- 중요한 정보, 이벤트 자체에 충분한 정보를 포함
- 불변-과거의 메시지를 변경할 수 없음을 보장
- 과거 시제의 동사로 표현됨(ex: "새로운 주문이 생성되었다")
<!-- - 이벤트 생성 시스템은 -->

### 이벤트 드리븐 구조가 적합한가?

1. 트랜잭션 정보가 포함된 이벤트를 전달하고 있는가?
2. 추가 비용 없이 적용 가능한 유용한 정보인가?
3. 강력하게 분리된 마이크로 서비스를 위해 필요한가?
4. Pub Sub 구조가 필요한가?

## 어플리케이션 통합 서비스

### Pub/Sub을 지원하는 AWS 서비스

서버리스 Pub/Sub: Amazon SNS, Amazon EventBridge
관리형 메시지 브로커: Amazon MQ
스트리밍 메시지: Amazon Kinesis Data Streams, Amazon Manazon

## 어플리케이션 통합 방법

### 지점간(큐)

- 단일 수신자가 메시지 수신
- 확장성 용이
- 최대 트래픽 조절

### 게시자-구독자(토픽)

- 다중 구독자가 수신
- 내구성 있는 구독자 구성

### 토픽-큐-연결

- 팬-아웃 형태의 구성
- 메시지 처리를 위한 버퍼 역할

## 요약

- 이벤트 드리븐 아키텍처는 마이크로서비스간의 느슨한 결합을 가능하게 함
- 이벤트는 발생한 사건을 표현하는 방식이고, 펍섭 방식으로 다대다 전달이 가능
- 적절한 통합 서비스 및 패턴을 사용하여 어플리케이션을 통합
- 큐는 메시지 전달에 버퍼 역할을 수행하여 구독자의 메시지 생성 및 러리 속도의 차이를 극복하게 한다.
